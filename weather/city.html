<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="js/city.min.js"></script>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="js/city-data-tools.js"></script>
</head>

<body>
    <div class="container">
        <div class="row province-header">
            <a href="" onclick="history.back()">
                返回</a>
            <h3>选择城市</h3>
        </div>


        <div class="row cityname" id="cityVisited"></div>


    </div>
    <script>
        var cityStorage = localStorage.getItem("cityName");
        var cityNameArr = JSON.parse(cityStorage);

        for (var i = 0; i < cityNameArr.length; i++) {
            var city = document.createElement("div");
            city.className = "col-xs-3";
            var button = document.createElement("button");
            button.innerHTML = cityNameArr[i].n;
            button.onclick = (function(a) {
                return function() {
                    addCityCount(cityNameArr[a].n);
                    localStorage.setItem("last", cityNameArr[a].n);
                    getWeatherApi(cityNameArr[a].n)
                }
            })(i);
            city.appendChild(button);
            document.getElementById("cityVisited").appendChild(city);
        }
    </script>
</body>

</html>