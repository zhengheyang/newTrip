<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="js/weather-data.js"></script>
  <script src="js/city-data-tools.js"></script>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/weather.css">

</head>

<body>
  <div class="container">
    <div class="row header">
      <div class="col-xs-6">
        <h3 id="location"></h3>
        <a href="province.html">[切换]</a>
        <div>
          <img id="localPic" src="" alt="">
        </div>
        <button onclick="playWeather()">语音</button>
      </div>
      <div class="col-xs-6 header-right">
        <h2 id="currentState"></h2>
        <h1 id="currentTmpRange"></h1>
        <h4 id="currentTmp"></h4>
        <h4 id="wind"></h4>
        <h5 id="aqi"></h5>
      </div>
    </div>
    <div class="row title-box">
      <div class="col-xs-12">
        <h3 id="title">
                    </h2>
            </div>
        </div>
        <div id="forecast-content"></div>
    </div>
    <script>
        var myData = weatherData.HeWeather[0].daily_forecast;
        document.getElementById("location").innerHTML = localStorage.getItem("last");

        document.getElementById("currentState").innerHTML = myData[0].cond.txt_d;
        document.getElementById("currentTmpRange").innerHTML = myData[0].tmp.min + "~" + myData[0].tmp.max + "&#8451;";
        document.getElementById("currentTmp").innerHTML = "当期气温：" + weatherData.HeWeather[0].now.tmp + "&#8451;";
        document.getElementById("wind").innerHTML = weatherData.HeWeather[0].now.wind.dir + weatherData.HeWeather[0].now.wind.sc + "级";
        document.getElementById("aqi").innerHTML = "空气质量指数：" + weatherData.HeWeather[0].aqi.city.aqi + weatherData.HeWeather[0].aqi.city.qlty;
        document.getElementById("title").innerHTML = "7日天气预报";



        for (var i = 0; i < myData.length; i++) {
            var section = document.createElement("div");
            section.className = "row weather-section";

            var dateDiv = document.createElement("div");
            dateDiv.className = "col-xs-4";
            var dateH4 = document.createElement("H4");
            dateH4.id = "date" + i;
            dateH4.innerHTML = myData[i].date;
            dateDiv.appendChild(dateH4);
            section.appendChild(dateDiv);

            var stateDiv = document.createElement("div");
            stateDiv.className = "col-xs-4";
            stateDiv.style = "padding:0";
            var stateH4 = document.createElement("H4");
            stateH4.id = "state" + i;
            stateH4.innerHTML = myData[i].cond.txt_d + "转" + myData[i].cond.txt_n;
            stateDiv.appendChild(stateH4);
            section.appendChild(stateDiv);

            var tmpDiv = document.createElement("div");
            tmpDiv.className = "col-xs-4 tmp-box";
            var minH4 = document.createElement("H4");
            minH4.id = "minTmp" + i;
            minH4.innerHTML = myData[i].tmp.min;
            tmpDiv.appendChild(minH4);
            var blankH4 = document.createElement("H4");
            blankH4.innerHTML = "~";
            tmpDiv.appendChild(blankH4);

            var maxH4 = document.createElement("H4");
            maxH4.id = "maxTmp" + i;
            maxH4.innerHTML = myData[i].tmp.max + '&#8451;';
            tmpDiv.appendChild(maxH4);
            section.appendChild(tmpDiv);

            document.getElementById("forecast-content").appendChild(section);
        }

        var picBox1 = document.getElementById("localPic");
        picBox1.setAttribute("src", "images/32.png");
        picBox1.setAttribute("width", "50%");

        function playWeather(message){
            message=document.getElementById("location").innerHTML+document.getElementById("currentState").innerHTML+document.getElementById("currentTmp").innerHTML+document.getElementById("wind").innerHTML+document.getElementById("aqi").innerHTML;
            weather(message);
        }

    </script>

    <!-- 讯飞语音 -->
    <script type="text/javascript" src="libs/tts/js/fingerprint.js"></script>
    <script type="text/javascript" src="libs/tts/js/tts.min.js"></script>
    <script type="text/javascript" src="libs/tts/js/tts_demo.js"></script>




</body>

</html>
